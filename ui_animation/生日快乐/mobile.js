//iscroll.min.js
(function(){var m=Math,mround=function(r){return r>>0},vendor=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",isIDevice=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion)),isPlaybook=/playbook/gi.test(navigator.appVersion),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=vendor+"Transform"in document.documentElement.style,hasTransitionEnd=isIDevice||isPlaybook,nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,17)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",trnOpen="translate"+(has3d?"3d(":"("),trnClose=has3d?",0)":")",iScroll=function(el,options){var i,that=this,doc=document;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform?that.options.useTransform:!1,that.options.hScrollbar=that.options.hScroll&&that.options.hScrollbar,that.options.vScrollbar=that.options.vScroll&&that.options.vScrollbar,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[vendor+"TransitionProperty"]=that.options.useTransform?"-"+vendor.toLowerCase()+"-transform":"top left",that.scroller.style[vendor+"TransitionDuration"]="0",that.scroller.style[vendor+"TransformOrigin"]="0 0",that.options.useTransition&&(that.scroller.style[vendor+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[vendor+"Transform"]=trnOpen+that.x+"px,"+that.y+"px"+trnClose:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),hasTouch||that._bind("mouseout",that.wrapper)};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case"mouseout":that._mouseout(e);break;case"webkitTransitionEnd":that._transitionEnd(e)}},_resize:function(){this.refresh()},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[vendor+"Transform"]=trnOpen+x+"px,"+y+"px"+trnClose+" scale("+this.scale+")":(x=mround(x),y=mround(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.zoomed=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[vendor+"Transform"].replace(/[^0-9-.,]/g,"").split(","),x=1*matrix[4],y=1*matrix[5]):(x=1*getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=1*getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(x!=that.x||y!=that.y)&&(that.options.useTransition?that._unbind("webkitTransitionEnd"):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV),that._bind(END_EV),that._bind(CANCEL_EV))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||that.maxScrollX>newX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>0||that.maxScrollY>newY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=0||that.maxScrollY>=0?0:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),6>that.absDistX&&6>that.absDistY||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))},_end:function(e){if(!hasTouch||0==e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV),that._unbind(END_EV),that._unbind(CANCEL_EV),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved){if(hasTouch){for(target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=document.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))}return that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e),void 0}if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,0>that.maxScrollY?that.scrollerH-that.wrapperH+that.y:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&that.maxScrollX>newPosX)&&(momentumX={dist:0,time:0}),(that.y>0&&newPosY>0||that.y<that.maxScrollY&&that.maxScrollY>newPosY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(mround(newPosX),mround(newPosY),newDuration),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e),void 0;that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=0||that.maxScrollY>0?0:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?(that.moved&&(that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that.moved=!1),void 0):(that.scrollTo(resetX,resetY,time||0),void 0)},_mouseout:function(e){var t=e.relatedTarget;if(!t)return this._end(e),void 0;for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind("webkitTransitionEnd"),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return that._resetPos(400),void 0;if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,step.time?that._bind("webkitTransitionEnd"):that._resetPos(0),void 0;animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),that._startAni(),void 0):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),that.animating&&(that.aniTime=nextFrame(animate)),void 0)},animate()}},_transitionTime:function(time){this.scroller.style[vendor+"TransitionDuration"]=time+"ms"},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:mround(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return{left:left,top:top}},_bind:function(type,el,bubble){(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[vendor+"Transform"]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV),that._unbind(END_EV),that._unbind(CANCEL_EV),that._unbind("mouseout",that.wrapper),that.options.useTransition&&that._unbind("webkitTransitionEnd"),that.options.onDestroy&&that.options.onDestroy.call(that)},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth,that.wrapperH=that.wrapper.clientHeight,that.scrollerW=that.scroller.offsetWidth,that.scrollerH=that.scroller.offsetHeight,that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH,that.dirX=0,that.dirY=0,that.hScroll=that.options.hScroll&&0>that.maxScrollX,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[vendor+"TransitionDuration"]="0",that._resetPos(200)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>0?0:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV),this._unbind(END_EV),this._unbind(CANCEL_EV)},enable:function(){this.enabled=!0},stop:function(){cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll})();


//for mobile device
(function($){
	$(function(){
		// 翻转会员卡
		var card = $(".vip-card");
		card.click(function(){
			card.toggleClass("flipped");
			return false;
		});
		
	});
	
	$(function(){
		// 创建横向列表滚动器
		function createScroller () {		
			$('.m-scroll').each(function () {
				var self = $(this),
					length = self.find('li').length,
					itemWidth = self.find('li').width() + 10,
					wid = length * itemWidth + 10;
					self.find('ul').width(wid);
			});
			$('.m-scroll').each(function () {
				var scroller = new iScroll(this, {
					hScroll: true,
					vScroll: false,
					onBeforeScrollStart: function ( e ) {
				        if ( this.absDistX > (this.absDistY + 5 ) ) {
				            // user is scrolling the x axis, so prevent the browsers' native scrolling
				            e.preventDefault();
				        }
				    },
				    //解决第一次无法滑动的问题
				    onTouchEnd: function () {
				        var self = this;
				        if (self.touchEndTimeId) {
				                clearTimeout(self.touchEndTimeId);
				        }
				        self.touchEndTimeId = setTimeout(function () {
				                self.absDistX = 0;
				                self.absDistX = 0;
				        }, 600);
				    }
				});

				$(this).data('scroll', scroller);
			});
		}
		createScroller();
	});
})(Zepto);
//End mobile device